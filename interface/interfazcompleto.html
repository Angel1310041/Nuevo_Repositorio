<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Interfaz Sensor</title><link rel="shortcut icon" type="image/x-icon" href="../imagenes/images (1).png"><link rel="stylesheet" href="estilos.css"><script src="JavaScript.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></head><body><div id="Menu_Desplegable" class="Menu" onclick="menubar()"><div class="line"></div><div class="line"></div><div class="line"></div></div><div class="header"><h1>==SENSOR==<img src="C:\Users\angel\Downloads\images.png"></h1></div><nav class="menuu" id="menuu"><div class="submenu"><a onclick='showContent("inicio")'><i class="fas fa-home"></i>Inicio</a><a onclick='showContent("parametros")'><i class="fas fa-sliders-h"></i>Parámetros</a><a onclick='showContent("pruebas")'><i class="fas fa-vial"></i>Pruebas</a><a onclick='showContent("salir")'><i class="fas fa-sign-out-alt"></i>Salir</a></div></nav><div id="pantalla-carga" style="display:none"><div class="loader"><div></div><div></div><div></div></div></div><div id="apartado-pruebas" style="display:none;margin-top:120px;text-align:center"><h2>Pruebas</h2><button id="btn-enviar-rf"><i class="fas fa-paper-plane"></i>Enviar RF</button><div style="margin-top:30px"><ul id="lista-pantallas" style="list-style:none;padding:0;margin:0"><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(1)">Pantalla 1</button></li><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(2)">Pantalla 2</button></li><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(3)">Pantalla 3</button></li><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(4)">Pantalla 4</button></li><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(5)">Pantalla 5</button></li><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(6)">Pantalla 6</button></li><li style="margin-bottom:30px"><button onclick="mostrarPantallaLora(7)">Pantalla 7</button></li></ul></div></div><div id="apartado-parametros" style="display:none;margin-top:120px;text-align:center"><h2>Parámetros</h2><form id="form-parametros"><div style="margin-bottom:14px"><label for="id-alarma">ID de la alarma:</label><br><input type="text" id="id-alarma" name="id-alarma" min="1" max="9999" maxlength="4" pattern="\d*" required style="width:80%;padding:6px"></div><div style="margin-bottom:14px"><label for="zona">Zona (1-510):</label><br><input type="text" id="zona" name="zona" min="1" max="510" maxlength="3" pattern="\d*" required style="width:80%;padding:6px"></div><div style="margin-bottom:18px"><label for="tipo-sensor">Tipo de sensor:</label><br><select id="tipo-sensor" name="tipo-sensor" required style="width:84%;padding:7px;border-radius:5px;font-size:1rem"><option value="0">0 - Gas LP</option><option value="1">1 - Humo</option><option value="2">2 - Movimiento</option><option value="3">3 - Puerta</option><option value="4">4 - Ventana</option><option value="5">5 - Cortina</option><option value="6">6 - Botón Físico/Pánico</option><option value="7">7 - Palanca</option><option value="9">9 - Test</option></select></div><button type="submit" id="btn-guardar-parametros"><i class="fas fa-save"></i>Guardar</button></form></div><div id="apartado-inicio" style="display:block;margin:130px auto 0 auto;max-width:400px;background:#fff;border-radius:14px;box-shadow:0 4px 24px rgba(0,0,0,.1);padding:36px 28px 28px 28px;text-align:center"><h2 style="color:#54b435;margin-bottom:18px">Resumen de la Alarma</h2><div style="font-size:1.1rem;color:#333;text-align:left;margin-bottom:18px"><strong>Versión:</strong>3.2.1.2<br><strong>Tipo de sensor:</strong><span id="resumen-tipo-sensor">---</span><br><strong>Zona configurada:</strong><span id="resumen-zona">---</span><br><strong>ID de alarma:</strong><span id="resumen-id">---</span><br><strong>Última actualización:</strong><span id="resumen-actualizacion">---</span></div></div></body><style>body { background-color: #F8FFDB; font-family: 'Segoe UI', Arial, sans-serif; font-size: 18px; margin: 0; padding: 0; } .Menu { position: fixed; top: 4%; left: 5%; cursor: pointer; display: flex; flex-direction: column; width: 38px; height: 38px; justify-content: center; gap: 7px; z-index: 1100; } .Menu div { background-color: #000; height: 5px; border-radius: 2px; width: 100%; transition: 0.3s; } .header { background:#5CB338; padding: 0px 0; text-align: center; position: fixed; top: 0; width: 100%; min-height: 70px; left: 0; display: flex; justify-content: center; align-items: center; z-index: 2; box-shadow: 0 2px 12px rgba(9,107,104,0.08); } .header img { height: 4rem; width: 4rem; margin-left: 10px; } .menuu { position: fixed; top: 0; left: -220px; width: 220px; height: 100%; background: #379237; color: #fff; box-shadow: 1px 0 5px #000; transition: left 0.3s; z-index: 1050; padding-top: 80px; display: block; } .menuu.activo { left: 0; } .menuu .submenu { display: flex; flex-direction: column; gap: 18px; padding: 0 18px; } .menuu .submenu a { color: #fff; text-decoration: none; font-size: 1.1em; padding: 10px 0; border-bottom: 1px solid #444; transition: background 0.2s, color 0.2s; cursor: pointer; border-radius: 4px; } #pantalla-carga { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.8); z-index: 2000; display: none; align-items: center; justify-content: center; } .loader { display: flex; gap: 10px; } .loader div { width: 20px; height: 20px; background: #49FF00; border-radius: 50%; animation: bounce 0.8s infinite alternate; } .loader div:nth-child(2) { animation-delay: 0.2s; } .loader div:nth-child(3) { animation-delay: 0.4s; } @keyframes bounce { to { transform: translateY(-30px); opacity: 0.5; } } #apartado-inicio, #apartado-pruebas, #apartado-parametros { background: #fff; border-radius: 16px; max-width: 400px; margin: 110px auto 0 auto; padding: 32px 24px 24px 24px; text-align: center; transition: box-shadow 0.3s; } #apartado-inicio h2, #apartado-pruebas h2, #apartado-parametros h2 { color: #06D001; margin-bottom: 18px; font-size: 1.5rem; letter-spacing: 1px; } #apartado-inicio strong { color: #399918; } #apartado-pruebas button, #apartado-parametros button, #apartado-inicio button, #btn-enviar-rf, #btn-guardar-parametros { background: #54B435; color: #fff; border: none; border-radius: 8px; padding: 12px 0; width: 90%; font-size: 1rem; font-weight: 500; cursor: pointer; box-shadow: 0 2px 8px rgba(9,107,104,0.08); margin: 0 auto 10px auto; display: block; transition: background 0.2s, transform 0.2s; } #apartado-pruebas button:hover, #apartado-parametros button:hover, #apartado-inicio button:hover, #btn-enviar-rf:hover, #btn-guardar-parametros:hover { background: #65B741; transform: translateY(-2px) scale(1.03); } #lista-pantallas { list-style: none; padding: 0; margin: 0 auto; max-width: 380px; } #lista-pantallas li { margin-bottom: 14px; display: flex; justify-content: center; } #lista-pantallas li:last-child { margin-bottom: 0; } #form-parametros label { color: #333; font-size: 1rem; margin-bottom: 4px; display: block; text-align: left; margin-left: 10%; } #form-parametros input[type="text"], #form-parametros input[type="number"] { width: 100%; padding: 9px; margin-bottom: 16px; border: 1px solid #b0b0b0; border-radius: 6px; font-size: 1rem; box-sizing: border-box; background: #f7fafc; transition: border 0.2s; } #form-parametros input[type="text"]:focus, #form-parametros input[type="number"]:focus { border: 1.5px solid #000; outline: none; } @media (max-width: 600px) { .header { min-height: 60px; font-size: 1rem; } #apartado-inicio, #apartado-pruebas, #apartado-parametros { max-width: 98vw; padding: 18px 4vw 18px 4vw; margin-top: 90px; } .Menu { width: 32px; height: 32px; gap: 5px; } .header img { height: 2.5rem; width: 2.5rem; } }</style><script>const _0x51e10e=_0x4174;function _0x4174(e,t){const o=_0x2d02();return(_0x4174=function(e,t){return o[e-=329]})(e,t)}function menubar(){const e=_0x4174;document.getElementById(e(402))[e(348)].toggle(e(417))}function showContent(e){const t=_0x4174,o=document.getElementById(t(332)),n=[t(361),t(398),t(344)];o[t(389)].display=t(330),n[t(343)]((e=>document[t(340)](e)[t(389)][t(405)]=t(372))),document[t(340)]("menuu")[t(348)][t(393)](t(417)),setTimeout((()=>{const n=t;switch(o[n(389)][n(405)]="none",e){case n(394):document.getElementById(n(361))[n(389)].display="block",fetchAndDisplayParameters();break;case n(356):document[n(340)]("apartado-pruebas")[n(389)].display="block";break;case n(329):document[n(340)](n(344))[n(389)][n(405)]="block";break;case n(331):fetch(n(408),{method:n(385)}).then((()=>setTimeout((()=>location[n(374)]()),1e3)));break;default:console.warn(n(366)+e)}}),1e3)}function fetchAndDisplayParameters(){const e=_0x4174;console[e(397)](e(406)),fetch("/get-parametros").then((t=>{const o=e;if(!t.ok)throw new Error(o(334)+t[o(365)]);return t[o(336)]()})).then((t=>{const o=e,n=document[o(340)]("resumen-id"),a=document[o(340)]("resumen-zona"),r=document[o(340)](o(407)),s=document[o(340)](o(392)),c={0:o(373),1:o(383),2:o(367),3:"3 - Puerta",4:o(362),5:o(342),6:"6 - Botón Físico/Pánico",7:o(379),9:o(396)}[t[o(399)]]||o(357)+t[o(399)]+")";n&&a&&r&&s?(n.textContent=t.id,a[o(384)]=t[o(412)],r[o(384)]=c,s[o(384)]=(new Date).toLocaleString(),console[o(397)](o(354))):console[o(387)]("No se encontraron todos los elementos de resumen.")})).catch((t=>{const o=e;console[o(387)](o(339),t);const n=document[o(340)](o(392));n&&(n[o(384)]=o(411))}))}function enviarLora(e){const t=_0x4174;fetch(t(403),{method:t(385),headers:{"Content-Type":t(369)},body:JSON[t(382)]({mensaje:e})})[t(360)]((e=>e.json()))[t(360)]((o=>{const n=t;o[n(365)]?alert(n(355)+e+n(413)):o[n(387)]&&alert("Error: "+o[n(387)])}))[t(347)]((e=>{const o=t;alert(o(414)),console[o(387)](e)}))}function _0x2d02(){const e=["7 - Palanca","102FaEkdU","687544xYXJlB","stringify","1 - Humo","textContent","POST","Respuesta desconocida al solicitar pantalla:","error","Error: ","style","resumen-zona","btn-enviar-rf","resumen-actualizacion","remove","inicio","DOMContentLoaded","9 - Test","log","apartado-pruebas","tipo","Enviando parámetros:","3274130LgJUco","menuu","/enviar-lora","13300BdwDbV","display","Solicitando parámetros actuales desde el servidor...","resumen-tipo-sensor","/reiniciar","Solicitando mostrar pantalla en la tarjeta:","click","Error al cargar","zona",'" enviado correctamente por LoRa.',"Error de comunicación con el servidor.","addEventListener","235122NdvHBa","activo","parametros","flex","salir","pantalla-carga","/enviar-rf-prueba","HTTP error! status: ","18xnaASf","json","Error en fetch:","options","Error al obtener parámetros:","getElementById","form-parametros","5 - Cortina","forEach","apartado-parametros","Error de comunicación con el servidor al solicitar pantalla.","637692wrcaFm","catch","classList","1563498JMgsUl","Enviando señal RF de prueba...","toLocaleString","El ID de la alarma debe ser un número de 4 dígitos.","id-alarma","Parámetros actualizados correctamente.",'Mensaje "',"pruebas","Tipo desconocido (","58096wYxFVI","text","then","apartado-inicio","4 - Ventana","42EfEVTJ","submit","status","Sección desconocida: ","2 - Movimiento","resumen-id","application/json","Resumen actualizado.","Pantalla mostrada correctamente:","none","0 - Gas LP","reload","test","value","tipo-sensor","Error al solicitar pantalla: "];return(_0x2d02=function(){return e})()}function mostrarPantallaLora(e){const t=_0x4174;console[t(397)](t(409),e),fetch("/mostrar-pantalla",{method:t(385),headers:{"Content-Type":t(369)},body:JSON[t(382)]({numero:e})})[t(360)]((e=>e[t(336)]()))[t(360)]((e=>{const o=t;e[o(365)]?console.log(o(371),e.status):e[o(387)]?alert(o(378)+e.error):console[o(397)](o(386),e)}))[t(347)]((e=>{const o=t;alert(o(345)),console[o(387)](o(337),e)}))}!function(e,t){const o=_0x4174,n=_0x2d02();for(;;)try{if(385943===-parseInt(o(416))/1+-parseInt(o(346))/2+-parseInt(o(380))/3*(parseInt(o(358))/4)+parseInt(o(401))/5+parseInt(o(349))/6+-parseInt(o(363))/7*(-parseInt(o(381))/8)+-parseInt(o(335))/9*(-parseInt(o(404))/10))break;n.push(n.shift())}catch(e){n.push(n.shift())}}(),document[_0x51e10e(415)](_0x51e10e(395),(()=>{const e=_0x51e10e;fetchAndDisplayParameters();const t=document[e(340)](e(341));t&&t[e(415)](e(364),(function(t){const o=e;t.preventDefault();const n=document.getElementById(o(353)).value,a=document[o(340)]("zona")[o(376)],r=document[o(340)](o(377)),s=r[o(376)],c=r[o(338)][r.selectedIndex][o(359)];if(!/^\d{4}$/[o(375)](n))return void alert(o(352));const l={"id-alarma":parseInt(n),zona:parseInt(a),"tipo-sensor":parseInt(s)};console[o(397)](o(400),l),fetch("/guardar-parametros",{method:o(385),headers:{"Content-Type":o(369)},body:JSON[o(382)](l)}).then((e=>e[o(336)]())).then((e=>{const t=o;e[t(365)]?(alert(e[t(365)]),document[t(340)](t(368)).textContent=n,document.getElementById(t(390)).textContent=a,document[t(340)](t(407))[t(384)]=c,document.getElementById(t(392)).textContent=(new Date)[t(351)](),console[t(397)](t(370))):e[t(387)]?alert(t(388)+e[t(387)]):alert("Respuesta desconocida del servidor.")}))[o(347)]((e=>{const t=o;alert(t(414)),console[t(387)](t(337),e)}))}));const o=document[e(340)](e(391));o&&o[e(415)](e(410),(()=>{const t=e;console[t(397)](t(350)),fetch(t(333),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON[t(382)]({})})[t(360)]((e=>e.json())).then((e=>{const o=t;e[o(365)]?alert(e.status):e[o(387)]?alert(o(388)+e[o(387)]):alert("Respuesta desconocida del servidor.")}))[t(347)]((e=>{const o=t;alert("Error de comunicación con el servidor al enviar RF."),console[o(387)](o(337),e)}))}))}));</script></html>